if (self.CavalryLogger) { CavalryLogger.start_js(["WzYlH"]); }

__d("UFIAsyncWrapper",["React","UFIConfig"],(function(a,b,c,d,e,f){"use strict";e.exports=b("UFIConfig").reactFiberAsyncUFI?b("React").unstable_ConcurrentMode:b("React").Fragment}),null);
__d("UFIDispatcher",["ReactDispatcher_DEPRECATED","UFISharedDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.dispatch=function(c){a.prototype.dispatch.call(this,c),b("UFISharedDispatcher").dispatch(c)};return c}(b("ReactDispatcher_DEPRECATED"));e.exports=a}),null);
__d("UFINewCommentNotifier",["Arbiter","UFIFeedbackTargets","UFIUIEvents","UFIUserActions"],(function(a,b,c,d,e,f){"use strict";a={onNewComment:function(a,c,d,e,f,g){b("UFIUserActions").addComment(c.ftentidentifier,d.visibleValue,d.encodedValue,{source:c.source,ufiinstanceid:c.instanceid,target:e,replyid:f,rootid:c.rootid,attachedphoto:d.attachedPhoto,attachedvideo:d.attachedVideo,attachedfile:d.attachedFile,attachedsticker:d.attachedSticker,feedcontext:c.feedcontext,timestamp:g,feedbackReferrer:c.feedbackReferrer,isMarkdown:d.isMarkdown,fluentContentToken:c.fluentContentToken,isActiveLivingRoom:c.isActiveLivingRoom,livingRoomID:c.livingRoomID,isLiveVOD:c.isLiveVOD,islivestreaming:c.islivestreaming,liveVideoQuickCommentQuality:d.liveVideoQuickCommentQuality,photoTextTagID:c.photoTextTagID,isPhotoTag:c.isPhotoTag,photoFBID:c.photoFBID,photoTagX:c.photoTagX,photoTagY:c.photoTagY,privacyValue:d.privacy_value,section:d.section,selectedInsightPoint:d.selectedInsightPoint,attachedshareurl:d.attachedShareURL,isBroadcasterUFI:c.isBroadcasterUFI,enableVODCommentTimestamps:c.enableVODCommentTimestamps,trackingID:d.trackingID,delightRanges:d.delightRanges}),b("UFIFeedbackTargets").getFeedbackTarget(c.ftentidentifier,function(f){a&&b("Arbiter").inform(b("UFIUIEvents").Comment,{ft_id:f.entidentifier,target:e,form:a,isinverted:f.isranked||c.islivestreaming||c.isActiveLivingRoom,isPhotoTag:c.isPhotoTag,photoTextTagID:c.photoTextTagID,photoTagX:c.photoTagX,photoTagY:c.photoTagY,commentString:d.visibleValue})})}};e.exports=a}),null);
__d("CommentPrelude",["BanzaiODS","CSS","FBLogger","Parent","clickRefAction","ifRequired"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c){if(a==="ufi.react"||a==="ufi_mentions_input.react"||a==="ufi_controller"||a==="action_link_bling"||a==="action_link_timeline_bling")return;b("FBLogger")("ufi").warn("Deprecated CommentPrelude action %s called from ref %s",c||"unknown",a||"unknown");b("BanzaiODS").bumpEntityKey("comment_prelude",a)}function a(a,c,d){g(d,"click");var e=b("Parent").byTag(a,"form");if(!e||!b("CSS").hasClass(e,"collapsible_comments"))return;b("clickRefAction")("ufi",a,null,"FORCE");return h(a,c,d)}function h(a,c,d){__p&&__p();g(d,"expand");a=b("Parent").byTag(a,"form");if(!a||!b("CSS").hasClass(a,"collapsible_comments"))return;i(a,d);if(c!==!1){var e=a.add_comment_text_text||a.add_comment_text;d=e.length;d&&(!b("Parent").byClass(e[d-1],"UFIReplyList")?e=e[d-1]:!b("Parent").byClass(e[0],"UFIReplyList")?e=e[0]:e=null);e&&(e.focus(),b("ifRequired")("FbFeedCommentUFIScroller",function(a){return a.reveal(e)}))}return!1}function i(a,c){g(c,"uncollapse");if(!a||!b("CSS").hasClass(a,"collapsible_comments"))return;var d=b("CSS").removeClass.bind(null,a,"collapsed_comments");b("ifRequired")("ScrollAwareDOM",function(b){return b.monitor(a,d)},function(){return d()})}function c(a){var c=a.getAttribute("data-comment-prelude-ref");g(c,"blingbox");c=b("Parent").byTag(a,"form");if(!c||!b("CSS").hasClass(c,"collapsible_comments"))return;b("CSS").toggleClass(c,"collapsed_comments")}d={click:a,expand:h,uncollapse:i,onBlingboxClick:c,logRef:g};e.exports=d}),null);
__d("UFIContainer.react",["cx","PrivateCommentsConfig","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:(this.props.isReplyList?"":"UFIList")+(b("PrivateCommentsConfig").dark_comment_theme_enabled&&this.props.isPrivateComment?" UFIPrivateCommentDarkTheme":"")+(this.props.isReplyList?" UFIReplyList":"")+(this.props.inReviewView?" UFIWhiteReplyList":"")+(this.props.isParentLiveDeleted?" UFITranslucentReplyList":"")+(this.props.isFirstCommentComponent?" _48pi":"")+(this.props.isLastCommentComponent?" UFILastCommentComponent":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.props.shouldHide?" hidden_elem":"")},this.props.children)};return c}(b("React").Component);e.exports=a}),null);
__d("EntstreamFeedObjectFollowTombstone.react",["cx","fbt","AsyncRequest","LeftRight.react","React","ShimButton.react","URI","XUICloseButton.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.toggleFollowState=function(){d.setState({isFollowing:!d.state.isFollowing});d.props.menuItem.toggleMenuItem();var a=new(b("URI"))("/ajax/litestand/follow_post");a.setQueryData({follow:d.state.isFollowing,message_id:d.state.postID});new(b("AsyncRequest"))().setURI(a).setMethod("POST").send()};d.state={isFollowing:d.props.isFollowing,postID:d.props.postID};return d}var d=c.prototype;d.getFollowText=function(){if(this.state.isFollowing)return h._("You'll no longer get notifications about this post.");else return h._("You'll get a notification whenever someone comments on this post.")};d.getFollowActionLinkText=function(){if(this.state.isFollowing)return h._("Turn On Notifications");else return h._("Turn Off Notifications")};d.render=function(){return b("React").createElement("div",{className:"_5w_i _5ww7 _5ww9"},b("React").createElement(b("LeftRight.react"),null,this.getFollowText(),b("React").createElement(b("XUICloseButton.react"),{className:"_5xsl"})),b("React").createElement(b("ShimButton.react"),{className:"_1f89",form:"link",onClick:this.toggleFollowState},this.getFollowActionLinkText()))};return c}(b("React").Component);e.exports=a}),null);
__d("EntstreamFeedObjectWorkFollowTombstone.react",["ix","cx","fbt","FlexLayout.react","Image.react","React","XUICloseButton.react","XUIText.react","asset"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("FlexLayout.react"),{align:"center"},b("React").createElement(b("FlexLayout.react"),{align:"center",justify:"center",className:"_7kl5"},b("React").createElement(b("Image.react"),{src:g("834159")})),b("React").createElement(b("FlexLayout.react"),{direction:"vertical",className:"_19c4 _3-8s"},b("React").createElement(b("XUIText.react"),{display:"block",size:"body2",weight:"bold"},i._("Notifications on")),b("React").createElement(b("XUIText.react"),{color:"secondary",display:"block"},i._("You'll get a notification whenever someone comments on this post"))),b("React").createElement("div",null,b("React").createElement(b("XUICloseButton.react"),{className:"_5xsl"},i._("Close"))))};return c}(b("React").Component);e.exports=a}),null);
__d("PostsByOtherPreviewObject",["csx","Parent"],(function(a,b,c,d,e,f,g){a={getRoot:function(a){return b("Parent").bySelector(a,"._5kjo")}};e.exports=a}),null);
__d("EntstreamFeedObjectFollow",["cx","CurrentUser","DOM","EntstreamFeedObject","EntstreamFeedObjectFollowTombstone.react","EntstreamFeedObjectFollowup","EntstreamFeedObjectWorkFollowTombstone.react","PostsByOtherPreviewObject","React","ReactDOM","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={toggleFollow:function(a,c,d){__p&&__p();if(d==null)return;var e=b("EntstreamFeedObject").getRoot(b("ge")(c));e===null&&(e=b("PostsByOtherPreviewObject").getRoot(b("ge")(c)));if(!e)return;c=b("DOM").create("div",{className:(b("CurrentUser").isWorkUser()?"":"_1f86")+" _5wvy"});var f=a.getValue()=="follow_post";if(b("CurrentUser").isWorkUser()){if(!f)b("ReactDOM").render(b("React").createElement(b("EntstreamFeedObjectWorkFollowTombstone.react"),null),c),b("EntstreamFeedObjectFollowup").addFollowup(e,c,["_521o","_4-u3","_7kkg"]);else{var g=b("EntstreamFeedObjectFollowup").getFollowup(e);g&&b("EntstreamFeedObjectFollowup").removeFollowup(e)}return}b("ReactDOM").render(b("React").createElement(b("EntstreamFeedObjectFollowTombstone.react"),{isFollowing:f,postID:d,menuItem:a}),c);b("EntstreamFeedObjectFollowup").addFollowup(e,c,"_521o")},toggleFollowFromUFI:function(a,c,d){__p&&__p();if(!b("CurrentUser").isWorkUser())return;c=b("EntstreamFeedObject").getRoot(b("ge")(a));c===null&&(c=b("PostsByOtherPreviewObject").getRoot(b("ge")(a)));if(!c)return;if(d!=="follow_post"){a=b("DOM").create("div",{className:"_5wvy"});b("ReactDOM").render(b("React").createElement(b("EntstreamFeedObjectWorkFollowTombstone.react"),null),a);b("EntstreamFeedObjectFollowup").addFollowup(c,a,["_521o","_4-u3","_7kkg"])}else{d=b("EntstreamFeedObjectFollowup").getFollowup(c);d&&b("EntstreamFeedObjectFollowup").removeFollowup(c)}}};e.exports=a}),null);
__d("UFIShareLink.react",["cx","fbt","CurrentUser","React","TrackingNodes","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){if(c.props.href&&c.props.href!=="#"&&!c.props.onClick)return;a.preventDefault();c.props.onClick&&c.props.onClick(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=h._("Send this to friends or post it on your timeline.");b("CurrentUser").isWorkUser()&&(a=h._("Send this to coworkers or post it on your timeline."));var c='{ "tn": "'+b("TrackingNodes").encodeTN(b("TrackingNodes").types.SHARE_LINK)+'", "type": 25 }',d=this.props,e=d.openOnInit;d=babelHelpers.objectWithoutPropertiesLoose(d,["openOnInit"]);return b("React").createElement("span",{className:"_27de _4noj"},b("React").createElement("a",babelHelpers["extends"]({},d,{className:b("joinClasses")(this.props.className,"share_action_link _5f9b"),onClick:this.$1,ref:function(a){a&&e&&a.click()},role:"button",tabIndex:0,"data-ft":c,title:a}),h._("Share")))};return c}(b("React").Component);e.exports=a}),null);
__d("UFIDispatcherContext.react",["React","UFIDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getChildContext=function(){return{dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores}};c.render=function(){return this.props.children};return b}(b("React").Component);c.childContextTypes={dispatch:a.func,stores:a.object};e.exports=c}),null);
__d("UFICallbackStore",["FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.__onDispatch=function(a){var b=a.type;a=babelHelpers.objectWithoutPropertiesLoose(a,["type"]);this.__emitter.emit(b,a)};c.on=function(a,b){return this.__emitter.addListener(a,b)};c.remove=function(){this.__emitter.removeAllListeners()};return b}(b("FluxStore"));a.__moduleID=e.id;e.exports=a}),null);
__d("UFIReactionStore",["Arbiter","FluxStore","UFIReactionTypes","UFIStoryActionType","UFIUIEvents","UFIUserActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__onDispatch=function(a){switch(a.type){case b("UFIStoryActionType").CHANGE_REACTION:b("UFIUserActions").changeReaction(a.contextArgs.ftentidentifier,a.reactionType,{rootid:a.contextArgs.rootid,source:a.contextArgs.source,feedbackReferrer:a.contextArgs.feedbackReferrer,fluentContentToken:a.contextArgs.fluentContentToken,isLiveVOD:a.contextArgs.isLiveVOD,islivestreaming:a.contextArgs.islivestreaming,instanceid:a.contextArgs.instanceid},a.target,a.sphericalYaw,a.sphericalPitch);b("Arbiter").inform(b("UFIUIEvents").ReactionButtonClicked,{ft_id:a.contextArgs.ftentidentifier,like_action:a.reactionType===b("UFIReactionTypes").LIKE,reaction_type:a.reactionType,target:a.target});break}};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=a}),null);
__d("UFIController",["csx","invariant","Promise","Arbiter","AsyncRequest","AuthorPinnedCommentLogger","BigPipe","BootloadedComponent.react","Bootloader","ClientIDs","CommentPrelude","CommentSection","DOM","DOMContainer.react","DOMQuery","FBFeedLocations","FBLogger","FeedbackPayloadSourceType","FeedbackSourceType","ImmutableObject","IntersectionObserver","JSResource","LiveTimer","PinnedCommentEventCreateSubscription","React","ReactDOM","Run","ShortProfiles","StaticUFI.react","SubscriptionsHandler","TranslationTrigger","UFIActionHeader.react","UFIActionLinks.react","UFIAddCommentActionType","UFIAsyncWrapper","UFICallbackStore","UFICentralUpdates","UFICommentAction","UFICommentActionType","UFICommentFilters","UFICommentLikeSubscription","UFICommentLogger","UFIComments","UFICommentSubscription","UFICommentUtils","UFICommentVisibilityStore","UFICommercialBreakAdapter","UFICommonInteractionLogger","UFIConfig","UFIConstants","UFIDispatcher","UFIDispatcherContext.react","UFIDomRootAdapter","UFIFeaturedReplyCommentListImpl","UFIFeaturedToplevelCommentListImpl","UFIFeedbackFilters","UFIFeedbackMode","UFIFeedbackStore","UFIFeedbackTargets","UFIFetcher","UFIInstanceAction","UFIInstanceActionType","UFILikeSubscription","UFILivePinnedCommentStore","UFILiveTypingIndicator","UFINewCommentNotifier","UFIOrderingModeStore","UFIPageCommentSubscription","UFIPaging","UFIPlayLiveVODHighlightsAdapter","UFIRange","UFIReactionStore","UFIReplyCommentList","UFIRootRegistry","UFIShareCountUpdateSubscription","UFISharedDispatcher","UFIStoryAction","UFIStoryActionType","UFIThreadedFacecastCommentsStore","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","UFITypingSubscriptionControllerFactory","UFIUIEvents","UFIVideoPlayerRegistry","UFIVisibility","UFIVODStreamingComments","URI","WebCommentViewOption","XCommentEmbedPluginEmbedAsyncDialogController","XGroupsContentRemoveDialogController","createArrayFromMixed","flattenArray","forEachObject","gkx","intersectionObserverEntryIsIntersecting","isEmpty","onEnclosingPageletDestroy","promiseDone","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(a,c,d,e){var f=a.getRequestedOffset();a=a.getRequestedLength();c=f+a===c;c=c&&j(e)?d-f:a;return new(b("UFIRange"))(f,c)},j=function(a){return a==b("FeedbackPayloadSourceType").USER_ACTION||a==b("FeedbackPayloadSourceType").LIVE_SEND||a==b("FeedbackPayloadSourceType").STREAMING},k,l=!1;a=function(){__p&&__p();c.factory=function(a,d,e){__p&&__p();if(!k||d.feedLocationType!==b("FBFeedLocations").NEWSFEED||l||d.substream_index!==1){c.$13(a,d,e);return}var f=new(b("IntersectionObserver"))(function(g,f){g.forEach(function(g){b("intersectionObserverEntryIsIntersecting")(g)&&(f.disconnect(),c.$13(a,d,e))})},{});f.observe(a);k.subscribeOnce(b("BigPipe").Events.displayed,function(){l=!0,f.disconnect(),c.$13(a,d,e),b("Bootloader").loadModules(["UFISubscriptionUpdates","UFIUserActions","UFIRetryActions"],function(){},"UFIController")})};c.prepare=function(){b("Arbiter").subscribeOnce(b("BigPipe").Events.init,function(a,b){k=b.arbiter})};c.$13=function(a,b,d){if(b.rootid)return null;b.rootid=a.id;return new c(a,Object.freeze(b),d)};var a=c.prototype;a.getRootNode=function(){return this.root};a.getContextArgs=function(){return this.$2};a.getFtEntIdentifier=function(){return this.$2.ftentidentifier};a.getInstanceID=function(){return this.$2.instanceid};a.getFluentContentToken=function(){return this.$2.fluentContentToken};a.shouldAutoplayLiveVODComments=function(){return!!this.$2.autoplayLiveVODComments};a.getIsCurrentCommentEmpty=function(){return this.$12};a.getOrderingMode=function(a){return a===b("CommentSection").FRIENDS?b("WebCommentViewOption").TOPLEVEL:b("UFIOrderingModeStore").getOrderingMode(this.$2.instanceid)};function c(a,c,d){__p&&__p();var e=this;this.$5=!1;this.$18=[];this.componentDidRender=function(){e.$18.length&&(e.$18.forEach(b("UFICommonInteractionLogger").endInteraction),e.$18.length=0)};this.$14();this.$15();this.root=a;this.$2=c;this.$6=null;b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").init(c,d));b("UFIRootRegistry").registerController(c.rootid,c.instanceid,c.ftentidentifier,function(){e.$16()});this.$4=new(b("UFIDomRootAdapter"))(this.root,this.$2);if(b("UFIConfig").feedfocusWrapperModule&&c.location=="newsstand"){var f=b("UFIConfig").feedfocusWrapperModule,g=b("DOMQuery").scry(this.root,"^._5pat");g=g[0];if(g){var h=b("createArrayFromMixed")(g.children),i=document.createDocumentFragment();h.forEach(function(a){i.appendChild(a)});b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(f,{instanceID:c.instanceid},b("React").createElement(b("DOMContainer.react"),null,i))),g)}}h=c.feedbackMode===b("UFIFeedbackMode").NEVER||c.feedbackMode===b("UFIFeedbackMode").NONE;this.$9={payloadSource:null,feedback:null,oldRange:{},commentIDToFocusOnMount:null,showLoadingUFI:!1,isActiveLoading:{},allSeenActiveLoadDirectionData:{},requestedInitialComments:!1,isHidden:h,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:!1,focusTopLevelComposer:!1,featuredCommentLists:{},featuredCommentIDs:[],translateAllCommentID:null,toplevelPagerClickCounts:{},replyPagerClickCounts:{},loadingVODComments:!1,shouldTranslateAllVisibleComments:!1,commentsLoadingTranslations:{},loadingCommentsForSection:new Set(),authorPinnedCommentID:null};this.$9.oldRange[b("CommentSection").DEFAULT]={offset:0,length:0};this.$9.deletedCounts[b("CommentSection").DEFAULT]={};this.authorProfiles={};this.comments={};this.comments[b("CommentSection").DEFAULT]=[];this.commentsToSection={};this.repliesMap={};this.$12=!0;d.authorpinnedcomments&&(this.authorPinnedComment=d.authorpinnedcomments[0],this.$9.authorPinnedCommentID=d.authorpinnedcomments[0].id);Object.assign(this.authorProfiles,d.profiles);var j=d.feedbacktarget?d.feedbacktarget:d.feedbacktargets&&d.feedbacktargets[0];this.canRenderHeader()||b("Bootloader").loadModules(["UFIActionLinkController"],function(b){return new b(a,c,j)},"UFIController");j&&this.$17(j,c);f=this.getOrderingMode(b("CommentSection").DEFAULT);g=null;var k=null;if(d.featuredcommentlists&&d.featuredcommentlists.comments&&d.featuredcommentlists.comments[c.ftentidentifier])g=d.featuredcommentlists.comments[c.ftentidentifier],this.$9.featuredCommentLists[c.ftentidentifier]=new(b("UFIFeaturedToplevelCommentListImpl"))(c.ftentidentifier,g.values,d.comments);else{h=d.commentlists&&d.commentlists.comments;h=h[c.ftentidentifier];g=h[f]}d.privatecommentlists&&d.privatecommentlists.comments&&d.privatecommentlists.comments[c.ftentidentifier]&&(k=d.privatecommentlists.comments[c.ftentidentifier][b("WebCommentViewOption").TOPLEVEL],this.$9.oldRange[b("CommentSection").FRIENDS]={offset:0,length:0});d.featuredcommentids&&(this.$9.featuredCommentIDs=d.featuredcommentids);this.ranges={};this.replyRanges={};this.commentCounts={};this.commentCounts[c.ftentidentifier]=0;this.privateCommentsCount=0;this.ranges[b("CommentSection").DEFAULT]={};this.ranges[b("CommentSection").DEFAULT][f]=new(b("UFIRange"))(g.range.offset,g.range.length);this.$9.oldRange[b("CommentSection").DEFAULT]={offset:g.range.offset,length:this.comments[b("CommentSection").DEFAULT]&&this.comments[b("CommentSection").DEFAULT].length||0};k&&(this.$9.deletedCounts[b("CommentSection").FRIENDS]={},this.comments[b("CommentSection").FRIENDS]=[],this.ranges[b("CommentSection").FRIENDS]={},this.ranges[b("CommentSection").FRIENDS][b("WebCommentViewOption").TOPLEVEL]=new(b("UFIRange"))(k.range.offset,k.range.length),this.$9.oldRange[b("CommentSection").FRIENDS]={offset:k.range.offset,length:this.comments[b("CommentSection").FRIENDS]&&this.comments[b("CommentSection").FRIENDS].length||0});d.commentlists.replies&&g.values.concat((k||{}).values||[]).concat(this.authorPinnedComment?this.authorPinnedComment.id:[]).forEach(function(a){var c=d.commentlists.replies[a];c&&(e.commentCounts[a]=e.getReplyCommentList(a).getCommentCount(),e.replaceReplyRange(a,new(b("UFIRange"))(c.range.offset,c.range.length)))});d.featuredcommentlists&&d.featuredcommentlists.replies&&g.values.forEach(function(a){var f=d.featuredcommentlists.replies[a];f&&(e.$9.featuredCommentLists[a]=new(b("UFIFeaturedReplyCommentListImpl"))(c.ftentidentifier,a,f.values,d.comments),e.commentCounts[a]=e.getReplyCommentList(a).getCommentCount(),e.replaceReplyRange(a,b("UFIRange").combine(new(b("UFIRange"))(f.range.offset,f.range.length),e.replyRanges[a])))});this.$7=null;this.ufiCentralUpdatesSubscriptions=[b("UFICentralUpdates").subscribe("feedback-updated",function(a,d){a=d.updates;c.ftentidentifier in a&&(e.$9.payloadSource=d.payloadSource,e.fetchAndUpdate(d.payloadSource,b("CommentSection").DEFAULT),k&&e.fetchAndUpdate(d.payloadSource,b("CommentSection").FRIENDS))}),b("UFICentralUpdates").subscribe("update-ranges",function(d,a){d=a.adjustedRanges&&a.adjustedRanges[c.ftentidentifier];d&&b("forEachObject")(d,function(a,b){b=e.getRange(b);b.updateRequestedRange(a.offset,b.length+a.length)})}),b("UFICentralUpdates").subscribe("update-feedback",function(b,a){a.ircid&&e.$18.push(a.ircid)})];this.$19(c);this.onUnloadSubscription=b("Run").onUnload(function(){return e.$20()});this.getToplevelCommentList(b("CommentSection").DEFAULT);k&&this.getToplevelCommentList(b("CommentSection").FRIENDS);b("UFICentralUpdates").handleUpdate(b("FeedbackPayloadSourceType").INITIAL_SERVER,d);if(c.islivestreaming&&c.fluentContentToken!=null){var l=Date.now();b("PinnedCommentEventCreateSubscription").subscribe(String(c.fluentContentToken),function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLivePinnedComment(c,a,Date.now()-l)},"UFIController")})}if(c.isActiveLivingRoom){var m=this.$2.ftentidentifier;b("Bootloader").loadModules(["PinnedStreamingCommentPinSubscription","RelayFBEnvironment","PinnedStreamingCommentUnpinSubscription"],function(a,d,e){a.subscribe(d,{feedback_id:m},{onNext:function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleFeedbackPinnedComment(c,a)},"UFIController")}}),e.subscribe(d,{feedback_id:m},{onNext:function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(a){b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(c))},"UFIController")}})},"UFIController")}(c.islivestreaming||c.isActiveLivingRoom)&&b("requireWeak")("UFILiveStreamingComments",function(a){var e=null;d.comments&&d.comments.length>0&&(e=d.comments[d.comments.length-1].fbid);a.start(c.ftentidentifier,j.commentcount,e,c.showLiveVideoAnnoucements,c.showLiveVideoBroadcastingJoinEvents,c.isViewerTheOwner,c.isLiveAudio,c);b("Run").onLeave(function(){return a.stop(c.ftentidentifier)})});!c.lazyFetch&&!this.canRenderHeader()&&this.$21(j);this.$2.fluentContentToken&&b("UFIVideoPlayerRegistry").registerUFIController(this,function(a){c.enableVODStreamingComments&&!e.$9.featuredCommentLists[c.ftentidentifier]&&b("UFIVODStreamingComments").start(e,a),b("UFICommercialBreakAdapter").start(c,a),b("UFIPlayLiveVODHighlightsAdapter").start(c,a),c.islivestreaming&&e.$11&&e.$11.addSubscriptions(a.addListener("stateChange",function(){a.isState("playing")&&e.render()})),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").foundVideoPlayerController(c,a))},function(){c.enableVODStreamingComments&&b("UFIVODStreamingComments").stop(e.$2.ftentidentifier,c.instanceid),b("UFICommercialBreakAdapter").stop(c.instanceid),b("UFIPlayLiveVODHighlightsAdapter").stop(c.instanceid)})}a.$19=function(a){__p&&__p();var c=this;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("onEnclosingPageletDestroy")(this.root,function(){c.$16()}),b("Arbiter").subscribe(b("UFIUIEvents").PageCleared,function(){c.$16()}),b("Arbiter").subscribe("ConversationNub/destroy",function(a,d){d.root&&b("DOMQuery").contains(d.root,c.root)&&c.$16()}),b("Arbiter").subscribe("WorkHub/destroy",function(a,d){d.root&&b("DOMQuery").contains(d.root,c.root)&&c.$16()}),b("Arbiter").subscribe("TahoeController/exitTahoe",function(){return b("UFISharedDispatcher").dispatch(b("UFIStoryAction").hideFacecastReplies(a,!0))}));a.viewas&&this.$1.addSubscriptions(b("Arbiter").subscribe("pre_page_transition",function(c,d){a.viewas!==new(b("URI"))(d.to).getQueryData("viewas")&&(b("UFIToplevelPagedCommentList").resetCommentListsForFeedbackTargetID(a.ftentidentifier),b("UFIToplevelStreamedCommentList").resetAllCommentLists(a.ftentidentifier))}))};a.$17=function(a,c){__p&&__p();this.$22();var d=Date.now(),e=[];(a.ll||this.$2.source===b("FeedbackSourceType").TAHOE)&&e.push(b("UFILikeSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveLike(c.ftentidentifier,a,Date.now()-d)},"UFIController")}));this.$2.source===b("FeedbackSourceType").TAHOE&&this.$2.islivestreaming===!0&&b("gkx")("685345")&&e.push(b("UFIShareCountUpdateSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveShares(c.ftentidentifier,a.live_video_share_count_update_subscribe,Date.now()-d)},"UFIController")}));a.pagelc&&e.push(b("UFIPageCommentSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveComment(c.ftentidentifier,a.page_comment_create_subscribe,Date.now()-d)},"UFIController")}));a.lc&&e.push(b("UFICommentSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveComment(c.ftentidentifier,a.comment_create_subscribe,Date.now()-d)},"UFIController")}));a.lcl&&e.push(b("UFICommentLikeSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveCommentLike(c.ftentidentifier,a,Date.now()-d)},"UFIController")}));a.lti&&b("UFILiveTypingIndicator").isEnabled()&&e.push(b("UFITypingSubscriptionControllerFactory").forUFIController(a,c));a=new(b("SubscriptionsHandler"))();a.addSubscriptions.apply(a,e.filter(function(a){return!!a}));this.$6=a};a.$23=function(){var a=b("UFIFeedbackStore").getState()[this.$2.ftentidentifier];a&&this.$17(a,this.$2)};a.$24=function(){__p&&__p();var a=b("DOMQuery").scry(this.root,"^._5pat");a&&a[0]&&b("ReactDOM").unmountComponentAtNode(a[0]);b("DOM").scry(this.root,"^form ._3csb").forEach(function(a){b("ReactDOM").unmountComponentAtNode(a)});a=this.$4.getHeadRoot();a&&b("ReactDOM").unmountComponentAtNode(a);if(b("UFIRootRegistry").isSnowliftNode(this.$2.rootid)){a=this.$4.getSnowliftActionRoot();a&&b("ReactDOM").unmountComponentAtNode(a)}this.reactRoot&&this.reactRoot.unmount();b("ReactDOM").unmountComponentAtNode(this.root)};a.unitTestOnlySetFeedbackIntoState=function(a){this.$9.feedback=a};a.$14=function(){__p&&__p();var a=this;this.$11||(this.$3=new(b("UFIDispatcher"))(),this.$10={UFICallbackStore:new(b("UFICallbackStore"))(this.$3),UFIReactionStore:new(b("UFIReactionStore"))(this.$3)},this.$11=new(b("SubscriptionsHandler"))(),this.$11.addSubscriptions(this.$10.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_LIKE,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeCommentLike(c.comment.id,c.like,{source:a.$2.source,target:c.target})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").CHANGE_REACTION,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeCommentReaction(c.comment.id,c.reactionType,{source:a.$2.source,instanceid:a.$2.instanceid},c.target)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFIStoryActionType").CHANGE_REACTION,function(a){b("Bootloader").loadModules(["UFILiveVideoCommentUtil"],function(b){return b.handleScheduledLiveSubscriberNuxLogic(a)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").CHANGE_VOTE,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeCommentVote(c.comment.id,c.comment.fbid,c.arrowType,c.currentVoteState,{source:a.$2.source,instanceid:a.$2.instanceid},c.target)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").REMOVE,function(c){b("Bootloader").loadModules(["UFICommentRemoveDialog","UFIUserActions"],function(b,d){return b.show(function(b){d.removeComment(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},b),c.onConfirm()})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").REMOVE_AND_BLOCK,function(c){b("Bootloader").loadModules(["UFICommentRemoveDialog","UFIUserActions"],function(b,d){return b.show(function(){d.removeComment(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},!0),c.onConfirm()},!0)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").DELETE_COMMENT_AND_REMOVE_COMMENTER,function(c){b("Bootloader").loadModules(["UFICommentDeleteAndMemberRemoveDialog","UFIUserActions"],function(b,d){b.showEx({authorName:c.comment.author_name,commentId:c.comment.id,showRemoveContentOptions:c.comment.canseeremovecontentoptions},function(b){d.deleteCommentAndRemoveCommenter(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},b.selectedDeletePosts,b.selectedDeleteComments,b.selectedDeclinePendingMembers,b.selectedBlockPermanently,b.selectedApplyToOtherGroups)})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").MUTE_MEMBER,function(c){__p&&__p();if(!c.comment.ismuted)b("Bootloader").loadModules(["UFIMemberMuteDialog","UFIUserActions"],function(b,d){return b.show(function(b,e){d.muteMember(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},b,e)},c.comment.author_name)},"UFIController");else{var d;b("Bootloader").loadModules(["GroupsMemberMuteDurationDefaults"],function(a){d=a.UNMUTE},"UFIController");b("Bootloader").loadModules(["UFIUserActions"],function(b){b.muteMember(c.comment.id,{source:a.$2.source,oneclick:!1,target:c.target},d,null)},"UFIController")}}),this.$10.UFICallbackStore.on("bulk_review",function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.showBulkReview(c.comment.id,{source:a.$2.source,target:c.target})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_TEXT_DELIGHTS,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.toggleTextDelights(c.comment,{source:a.$2.source,target:c.target},!c.comment.text_delights_are_hidden)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").TRANSLATE,function(c){a.$9.commentsLoadingTranslations[c.comment.id]||(a.$9.commentsLoadingTranslations[c.comment.id]=!0,b("Bootloader").loadModules(["UFIUserActions"],function(b){b.translateComments(c.comment.ftentidentifier,[c.comment.id],c.trigger,{source:a.$2.source,target:c.target})},"UFIController"),b("UFICommentUtils").shouldShowTranslateAll(a.comments[b("CommentSection").DEFAULT],a.repliesMap,babelHelpers["extends"]({},a.$9.defaultRepliesExpandedMap,a.$9.repliesExpandedMap),a.$9.commentsLoadingTranslations)&&(a.$9.translateAllCommentID=c.comment.id),a.render())}),this.$10.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_MARK_AS_SPAM,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.setHideAsSpam(c.comment.id,c.is_spam,{source:a.$2.source,target:c.target})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_KEEP_SPAM,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.keepSpam(c.comment.id,{source:a.$2.source,target:c.target})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").CHANGE_PIN_BY_AUTHOR,function(c){__p&&__p();var d=c.comment;b("Bootloader").loadModules(["UFIReplacePinnedCommentDialog","UFIUserActions"],function(e,f){__p&&__p();if(c.pinnedByAuthor){var g=a.$9.authorPinnedCommentID;g&&g!==d.id?e.show(function(){b("AuthorPinnedCommentLogger").logReplacingPinnedCommentAttempt(d.fbid);var e=b("UFIComments").getComment(g);b("UFIComments").setComment(g,b("ImmutableObject").set(e,{ispinnedbyauthor:!1}));f.authorPinComment(d,c.pinnedByAuthor);a.$9.authorPinnedCommentID=d.id}):(b("AuthorPinnedCommentLogger").logPinningCommentAttempt(d.fbid),f.authorPinComment(d,c.pinnedByAuthor),a.$9.authorPinnedCommentID=d.id)}else b("AuthorPinnedCommentLogger").logUnpinningCommentAttempt(d.fbid),a.$9.authorPinnedCommentID=null,f.authorPinComment(d,c.pinnedByAuthor)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_APPEAL_SPAM,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.appealSpam(c.comment.id,c.feedback.actorname,{source:a.$2.source,target:c.target})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_SECURE_ACCOUNT,function(c){b("Bootloader").loadModules(["UFICommentSecureAccountDialog","UFIUserActions"],function(b,d){return b.show(function(){d.secureAccount(c.comment.id,{source:a.$2.source,target:c.target})},c.feedback.actorname)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFIStoryActionType").CHANGE_ACCEPTED_ANSWER,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeAcceptedAnswer(a.comment,a.doAccept)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_INLINE_BAN,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.banUser(c.comment,c.ownerid,c.is_banned,{source:a.$2.source,target:c.target})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_INLINE_STREAM_BAN,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.streamBanUser(c.comment,c.ownerid,c.is_banned,{source:a.$2.source,target:c.target})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").EMBED,function(a){a=b("XCommentEmbedPluginEmbedAsyncDialogController").getURIBuilder().setString("comment_id",a.comment.id).getURI();new(b("AsyncRequest"))(a).send()}),this.$10.UFICallbackStore.on(b("UFICommentActionType").DELETE_COMMENT_WITH_FEEDBACK,function(c){var d=c.comment;c=b("XGroupsContentRemoveDialogController").getURIBuilder().setFBID("group_id",c.comment.group_id.toString()).setFBID("content_id",c.comment.fbid).setEnum("source","group_mall").getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({comment_id:d.id.toString(),ft_ent_identifier:d.ftentidentifier,source:a.$2.source,client_id:b("ClientIDs").getNewClientID()}).send()}),this.$10.UFICallbackStore.on(b("UFICommentActionType").MANAGE_CONSTITUENT_BADGE,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.manageConstituentBadge(a.comment)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFIAddCommentActionType").SUBMIT_NEW,function(c){var d=a.$4.getParentForm();d&&b("UFINewCommentNotifier").onNewComment(d,a.$2,c.comment,c.target,c.replyCommentID,c.timestamp)}),this.$10.UFICallbackStore.on(b("UFIAddCommentActionType").SUBMIT_EDIT,function(c){var d=c.comment,e=c.commentData,f=c.target;!e.visibleValue&&!e.attachedPhoto&&!e.attachedVideo&&!e.attachedFile&&!e.attachedSticker&&!e.attachedShareURL?b("Bootloader").loadModules(["UFICommentRemoveDialog","UFIUserActions"],function(b,c){return b.show(function(){return c.removeComment(d.id,{source:a.$2.source,oneclick:!1,target:f},!1)},!1)},"UFIController"):b("Bootloader").loadModules(["UFIUserActions"],function(b){b.editComment(d.id,e.visibleValue,e.encodedValue,{source:a.$2.source,target:f,attachedPhoto:e.attachedPhoto,attachedVideo:e.attachedVideo,attachedFile:e.attachedFile,attachedSticker:e.attachedSticker,attachedShareURL:e.attachedShareURL,isMarkdown:e.isMarkdown,delightRanges:e.delightRanges})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFICommentActionType").REMOVE_PREVIEW,function(c){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.removePreview(c.comment,{source:a.$2.source,target:c.target})},"UFIController")}),this.$10.UFICallbackStore.on(b("UFIAddCommentActionType").RETRY_SUBMIT,function(c){b("Bootloader").loadModules(["UFIRetryActions"],function(b){b.retrySubmit(c.comment,a.$2.source)},"UFIController")}),this.$10.UFICallbackStore.on(b("UFIStoryActionType").PAGE_IN_COMMENTS,function(c){a.$9.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION,a.$25(c.commentID,c.direction,c.nextRange,c.section),a.fetchAndUpdateWithLogs(b("FeedbackPayloadSourceType").USER_ACTION,c.section||b("CommentSection").DEFAULT,c.direction,c.interactionRequestCorrelationID)}),this.$10.UFICallbackStore.on(b("UFIStoryActionType").TOGGLE_REPLIES,function(c){a.$9.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION;c=c.commentID;var d=a.$9.repliesExpandedMap[c];d?(delete a.$9.isActiveLoading[c],a.$9.repliesExpandedMap[c]=!1,a.render()):(a.$9.focusedReplyComposer={replyID:"replycomposer-"+c,initiatorComment:null},a.$25(c,b("UFIPaging").BOTTOM,a.$26(c)),a.fetchAndUpdateWithLogs(b("FeedbackPayloadSourceType").USER_ACTION,a.commentsToSection[c]||b("CommentSection").DEFAULT))}),this.$10.UFICallbackStore.on(b("UFIStoryActionType").SHOW_REPLIES,function(c){a.$9.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION,a.$9.focusedReplyComposer={replyID:"replycomposer-"+c.commentID,initiatorComment:c.initiatorComment},a.$25(c.commentID,b("UFIPaging").BOTTOM,a.$26(c.commentID)),a.fetchAndUpdateWithLogs(b("FeedbackPayloadSourceType").USER_ACTION,a.commentsToSection[c.commentID]||b("CommentSection").DEFAULT)}),this.$10.UFICallbackStore.on(b("UFIStoryActionType").COMMENTS_ARRIVED,function(c){a.$9.loadingCommentsForSection["delete"](c.section),a.$9.payloadSource=c.source,a.$9.showLoadingUFI=!1,a.$9.isActiveLoading={},a.$9.commentIDToFocusOnMount=c.source===b("FeedbackPayloadSourceType").USER_ACTION&&!a.$2.isBroadcasterUFI&&!a.$2.isActiveLivingRoom?a.$27(c.newOffset,c.newLength,c.section):null,a.$9.oldRange[c.section]={offset:c.newOffset,length:c.newLength},a.$28(),a.$9.shouldTranslateAllVisibleComments&&!b("UFIOrderingModeStore").isLiveStreaming(a.$2.instanceid)&&a.$29(),c.interactionRequestCorrelationID&&a.$18.push(c.interactionRequestCorrelationID),a.render(),c.source==b("FeedbackPayloadSourceType").ENDPOINT_COMMENT_FETCH&&(b("Arbiter").inform(b("UFIUIEvents").CommentPager),b("UFIConfig").logCommentLoad&&b("UFICommentLogger").logCommentFetchReceived(a.$2.ftentidentifier,Date.now()))})))};a.$15=function(){__p&&__p();var a=this;this.$8=[b("UFISharedDispatcher").register(function(c){__p&&__p();switch(c.type){case b("UFIInstanceActionType").REMOVE:if(c.instanceID!==a.$2.instanceid){c.ftentidentifier===a.$2.ftentidentifier&&a.$23();return}b("UFIRootRegistry").cleanupInstance(c.instanceID);break;case b("UFIInstanceActionType").TOGGLE_COMMENTS:if(c.instanceID!==a.$2.instanceid)return;a.$9.payloadSource=b("FeedbackPayloadSourceType").COLLAPSE_ACTION;a.$9.isHidden=!a.$9.isHidden;a.render();break;case b("UFIInstanceActionType").CHANGE_ORDER_MODE:if(c.instanceID!==a.$2.instanceid)return;a.$9.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION;a.comments[b("CommentSection").FRIENDS]?a.$9.loadingCommentsForSection.add(b("CommentSection").DEFAULT):a.$9.showLoadingUFI=!0;a.render();a.fetchAndUpdate(b("FeedbackPayloadSourceType").USER_ACTION,b("CommentSection").DEFAULT);break;case b("UFIInstanceActionType").REQUESTED_VOD_COMMENTS:if(c.instanceID!==a.$2.instanceid)return;a.$9.loadingVODComments=!0;a.render();break;case b("UFIInstanceActionType").RECEIVED_VOD_COMMENTS:if(c.instanceID!==a.$2.instanceid)return;a.$9.loadingVODComments=!1;a.render();break;case b("UFIStoryActionType").LIVE_PIN_COMMENT:if(c.ftentidentifier!==a.$2.ftentidentifier)return;var d=b("UFIComments").getComment(c.commentID),e=d?d.author:null;e&&b("ShortProfiles").get(e,function(b){a.authorProfiles[e]=b,a.$5||a.render()});break;case b("UFIStoryActionType").LIVE_UNPIN_COMMENT:if(c.ftentidentifier!==a.$2.ftentidentifier)return;a.render();break;case b("UFIStoryActionType").SHOW_COMMENTS:if(c.instanceID!==a.$2.instanceid)return;a.$9.isHidden=!1;a.$9.focusTopLevelComposer=!0;b("CommentPrelude").expand(a.root,!1,"ufi_controller");a.staticUFI&&b("CommentPrelude").expand(a.staticUFI,!1,"ufi.react");a.render();break;case b("UFIInstanceActionType").TRANSLATE_ALL:if(c.instanceID!==a.$2.instanceid)return;if(a.$2.islivestreaming)break;a.$9.shouldTranslateAllVisibleComments=!0;a.$9.translateAllCommentID=null;a.$29();a.render();break;case b("UFIInstanceActionType").TOGGLE_AUTO_TRANSLATE_COMMENTS:if(c.instanceID!==a.$2.instanceid)return;a.$2.isActiveLivingRoom&&b("gkx")("943109")&&(a.$9.shouldTranslateAllVisibleComments=!a.$9.shouldTranslateAllVisibleComments,a.render());break;case b("UFIAddCommentActionType").CHANGE_CONTENT:if(c.instanceID!==a.$2.instanceid)return;a.$12=c.text.length===0;break;case b("UFIAddCommentActionType").SUBMIT_NEW:if(c.instanceID!==a.$2.instanceid)return;a.$12=!0;break}})]};a.getStores=function(){return this.$10};a.$26=function(a){a=this.commentCounts[a];var c=Math.min(a,this.$2.pagesize);return new(b("UFIRange"))(a-c,c)};a.$25=function(a,c,d,e){__p&&__p();e=e||this.commentsToSection[a]||b("CommentSection").DEFAULT;var f=this.$9,g=f.isActiveLoading,h=f.allSeenActiveLoadDirectionData,i=f.repliesExpandedMap,j=f.toplevelPagerClickCounts;f=f.replyPagerClickCounts;var k=this.$2.ftentidentifier,l=a!==k;g[a]=c;g=h[a]||{};g[c]=!0;h[a]=g;l?i[a]=!0:this.$9.hasPagedToplevel=!0;if(a==k){c=this.getOrderingMode(e);j[e]=j[e]||{};h=j[e][c]||0;j[e][c]=h+1;this.getRange(e).updateRequestedRange(d.offset,d.length)}else{g=f[a]||0;f[a]=g+1;this.replyRanges[a].updateRequestedRange(d.offset,d.length)}};a.$30=function(){__p&&__p();var a=this;this.$9.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION;this.$9.showLoadingUFI=!0;this.$9.requestedInitialComments=!0;this.$9.loadingCommentsForSection.add(b("CommentSection").DEFAULT);this.comments[b("CommentSection").FRIENDS]&&this.$9.loadingCommentsForSection.add(b("CommentSection").FRIENDS);this.$9.loadingCommentsForSection.forEach(function(c){var d=a.getToplevelCommentList(c).getCommentCount(),e=Math.min(d,a.$2.numLazyComments||0);b("forEachObject")(a.ranges[c],function(a){a.updateRequestedRange(d-e,e)});a.fetchAndUpdate(b("FeedbackPayloadSourceType").USER_ACTION,c)});b("UFIFeedbackTargets").getFeedbackTarget(this.$2.ftentidentifier,function(b){a.canRenderHeader()?a.renderHeader(b):a.$21(b)})};a.$21=function(a){var c=this;this.shouldShowCommentOrderingModeSelector(a)&&b("DOM").scry(this.root,"^form ._3csb").slice(0,1).forEach(function(d){b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFIOrderingModeSelectorContainer.react").__setRef("UFIController"),contextArgs:c.$2,feedback:a})),d)})};a.$28=function(){var a=this;if(Object.keys(this.$9.commentsLoadingTranslations).length==0)return;this.comments[b("CommentSection").DEFAULT].concat(this.comments[b("CommentSection").FRIENDS]||[]).forEach(function(b){a.$9.commentsLoadingTranslations[b.id]&&!!b.translationdata&&delete a.$9.commentsLoadingTranslations[b.id]});Object.keys(this.repliesMap).forEach(function(b){b=a.repliesMap[b];b.forEach(function(b){a.$9.commentsLoadingTranslations[b.id]&&!!b.translationdata&&delete a.$9.commentsLoadingTranslations[b.id]})})};a.$29=function(){__p&&__p();var a=this,c=this.comments[b("CommentSection").DEFAULT].concat(this.comments[b("CommentSection").FRIENDS]||[]).filter(function(b){return a.$31(b)}).map(function(a){return a.id}),d=babelHelpers["extends"]({},this.$9.defaultRepliesExpandedMap,this.$9.repliesExpandedMap),e=[];Object.keys(this.repliesMap).filter(function(a){return d[a]}).forEach(function(b){e=e.concat(a.repliesMap[b])});c=c.concat(e.filter(function(b){return a.$31(b)}).map(function(a){return a.id}));c.length>0&&(c.forEach(function(b){return a.$9.commentsLoadingTranslations[b]=!0}),b("Bootloader").loadModules(["UFIUserActions"],function(d){d.translateComments(a.$2.ftentidentifier,c,b("TranslationTrigger").TRANSLATE_ALL,{source:a.$2.source})},"UFIController"))};a.$31=function(a){return a.istranslatable&&!a.translationdata&&!this.$9.commentsLoadingTranslations[a.id]};a.canRenderHeader=function(){return!!this.$4.getHeadRoot()};a.renderHeader=function(a){if(!this.canRenderHeader())return;b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(b("UFIActionHeader.react"),{contextArgs:this.$2,dispatcher:this.$3,feedbacktarget:a,stores:this.$10})),this.$4.getHeadRoot());var c=b("UFIRootRegistry").isSnowliftNode(this.$2.rootid);c&&this.$4.getSnowliftActionRoot()&&b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$10},b("React").createElement(b("UFIActionLinks.react"),{contextArgs:this.$2,feedbacktarget:a,hideActorSelector:!0,hideBling:!0}))),this.$4.getSnowliftActionRoot())};a.shouldComponentUpdate=function(){if(this.$2.islivestreaming&&(this.$9.payloadSource===b("FeedbackPayloadSourceType").STREAMING||this.$9.payloadSource===b("FeedbackPayloadSourceType").LIVE_SEND)){var a=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerController(this.$2.instanceid);a=a?a.isState("playing")&&!a.getOption("WatchAndScroll","isActive"):!1;var c=b("UFICommentVisibilityStore").getVisibility(b("UFICommentVisibilityStore").getState(),this.$2)===b("UFIVisibility").VISIBLE;return a||c}return!0};a.render=function(){__p&&__p();var a=this;if(!this.shouldComponentUpdate())return;if(this.$9.showLoadingUFI||b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid)&&b("UFIThreadedFacecastCommentsStore").getCommentID(this.$2.instanceid)==null&&this.$9.loadingVODComments){b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,this.$32()),this.root);return}this.$9.feedback||h(0,5267);var c=this.$9.feedback,d=c.reactionsentences,e=c.likesentences;c=c.replysocialsentencemaxreplies;d=this.comments[b("CommentSection").DEFAULT].length||this.comments[b("CommentSection").FRIENDS]&&this.comments[b("CommentSection").FRIENDS].length||!b("isEmpty")((d||e).current);e=this.$9.payloadSource;d&&j(e)&&this.$2.feedbackMode!==b("UFIFeedbackMode").NEVER&&(this.$9.isHidden=!1,b("CommentPrelude").expand(this.root,!1,"ufi_controller"));if(this.$2.disableCSSHiding&&this.$9.isHidden){b("ReactDOM").unmountComponentAtNode(this.root);return}if(this.$2.lazyFetch&&!this.$9.requestedInitialComments){b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,this.$32()),this.root);this.$30();return}d=this.getRange(b("CommentSection").DEFAULT);this.$7===null&&(this.$7=d.getOffset()+d.getLength()-1);c=c||-1;var f={};f[this.$2.ftentidentifier]=new(b("UFIRange"))(d.offset,d.length).updateRequestedRange(d.requestedOffset,d.requestedLength);for(var g in this.replyRanges)f[g]=new(b("UFIRange"))(this.replyRanges[g].offset,this.replyRanges[g].length).updateRequestedRange(this.replyRanges[g].requestedOffset,this.replyRanges[g].requestedLength);var i=babelHelpers["extends"]({},this.$9.defaultRepliesExpandedMap,this.$9.repliesExpandedMap),k=!!this.$9.featuredCommentLists[this.$2.ftentidentifier];d=b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid)?!0:this.getToplevelCommentList(b("CommentSection").DEFAULT).getClientHasAll()&&d.offset===0&&d.length===this.getToplevelCommentList(b("CommentSection").DEFAULT).getCommentCount();var l=this.$9.focusTopLevelComposer,m=this.$33(e),n=this.getOrderingMode(b("CommentSection").DEFAULT),o=this.comments[b("CommentSection").DEFAULT].concat(this.authorPinnedComment?this.authorPinnedComment:[]).filter(function(b){return b.id!==a.$9.authorPinnedCommentID}),p=this.comments[b("CommentSection").DEFAULT].concat(this.authorPinnedComment?this.authorPinnedComment:[]).filter(function(b){return b.id===a.$9.authorPinnedCommentID});p=p.length&&p[0];var q=this.comments[b("CommentSection").FRIENDS],r=(this.ranges[b("CommentSection").FRIENDS]||{})[b("WebCommentViewOption").TOPLEVEL],s=b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$10},b("React").createElement(b("StaticUFI.react"),{ref:function(b){a.staticUFI=b},feedback:this.$9.feedback,contextArgs:this.$2,repliesMap:this.repliesMap,commentCounts:this.commentCounts,deletedCounts:this.$9.deletedCounts[b("CommentSection").DEFAULT],privateDeletedCounts:this.$9.deletedCounts[b("CommentSection").FRIENDS],availableComments:o,availablePrivateComments:q,source:this.$2.source,payloadSource:e,ranges:f,authorProfiles:this.authorProfiles,loggingOffset:this.$7,replySocialSentenceMaxReplies:c,orderingMode:n,hideOrderingModeSelector:k,commentPermalinks:this.$9.commentPermalinks,canAddCommentMap:this.$9.canAddCommentMap,canReplyMap:this.$9.canReplyMap,focusTopLevelComposer:l,focusReply:m,isActiveLoading:this.$9.isActiveLoading,allSeenActiveLoadDirectionData:this.$9.allSeenActiveLoadDirectionData,repliesExpandedMap:i,hasPagedToplevel:this.$9.hasPagedToplevel,commentIDToFocusOnMount:this.$9.commentIDToFocusOnMount,hideToplevelPager:d,featuredCommentIDs:this.$9.featuredCommentIDs,loadingTranslationsMap:this.$9.commentsLoadingTranslations,shouldTranslateAllVisibleComments:this.$9.shouldTranslateAllVisibleComments,translateAllCommentID:this.$9.translateAllCommentID,privateCommentsCount:this.privateCommentsCount,privateCommentsRange:r,loadingCommentsForSection:this.$9.loadingCommentsForSection,authorPinnedComment:p}));if(this.$2.enableAsyncFacecastUFI){var t=this.reactRoot?this.reactRoot:this.reactRoot=b("ReactDOM").unstable_createRoot(this.root);e===b("FeedbackPayloadSourceType").INITIAL_SERVER?b("ReactDOM").flushSync(function(){t.render(s,a.componentDidRender)}):t.render(s,this.componentDidRender)}else b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,s),this.root,this.componentDidRender);b("LiveTimer").updateTimeStamps();o=this.$4.getParentForm();o&&b("Arbiter").inform(b("UFIUIEvents").Changed,{form:o});e!=b("FeedbackPayloadSourceType").INITIAL_SERVER&&b("Arbiter").inform("reflow");this.$9.focusedReplyComposer=null;this.$9.focusTopLevelComposer=!1};a.$33=function(a){if(a===b("FeedbackPayloadSourceType").INITIAL_SERVER&&this.$9.feedback&&this.$9.feedback.permalinkcommentid)return{replyID:"replycomposer-"+this.$9.feedback.permalinkcommentid};else if(this.$9.focusedReplyComposer)return this.$9.focusedReplyComposer;return null};a.$27=function(a,c,d){var e=(this.$9.oldRange||{})[b("CommentSection").DEFAULT];if(e&&(e.offset!=a||e.length!=c)){a=a<e.offset?e.length:0;if(a<c)return this.comments[d][a].id}return this.$9.commentIDToFocusOnMount};a.$34=function(a,b,c){if(a&&b.id===a.permalinkcommentid)return!0;if(c>1)return!0;if(c>0&&b.interestingReplyOffset===void 0)return!0;b=a&&b.author===a.viewerid;return b&&c==1?!0:!1};a.getNewRange=function(a,c,d,e){if(b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid))return new(b("UFIRange"))(0,c.feedcarded?4:50);else{c=e===b("CommentSection").FRIENDS?this.privateCommentsCount:this.commentCounts[c.ftentidentifier];return i(this.getRange(e),c,d,a)}};a.getNewReplyRange=function(a,c,d){var e=c.id;if(this.replyRanges[e])return i(this.getReplyRange(e),this.commentCounts[e],d,a);else if(c.interestingReplyOffset!==void 0)return new(b("UFIRange"))(c.interestingReplyOffset,1);else{e=this.$9.feedback&&this.$9.feedback.isranked;a=e?0:Math.min(d,2);return new(b("UFIRange"))(0,a)}};a.fetchAndUpdateWithLogs=function(a,b,c,d){a===this.$9.payloadSource||h(0,5268),this.$35(a,!0,b,c,d)};a.fetchAndUpdate=function(a,b,c,d){a===this.$9.payloadSource||h(0,5269),this.$35(a,!1,b,c,d)};a.$36=function(a,b,c,d){var e=this.getOrderingMode(b);b=(this.$9.toplevelPagerClickCounts[b]||{})[e]||0;return{numPagerClicks:a?b:null,viewAs:this.$2.viewas,feedContext:this.$2.feedcontext,feedbackSource:this.$2.source,streamingOrderReversed:this.$2.streamingCommentOrderReversed,direction:c,interactionRequestCorrelationID:d}};a.$37=function(a,b){return{numPagerClicks:b?this.$9.replyPagerClickCounts[a]||0:null,viewAs:this.$2.viewas,feedContext:this.$2.feedcontext}};a.$38=function(a,c){__p&&__p();var d=this,e=this.$9.feedback,f=this.getToplevelCommentList(c),g=this.getNewRange(a,this.$2,f.getCommentCount(),c);f=b("UFIFetcher").fetchCommentsOrThrow(f,g,this.$36(!1,c));this.$39(g,f,c);var h=b("UFICommentFilters").getAuthors(f);c===b("CommentSection").DEFAULT&&this.authorPinnedComment&&(f=[].concat(f,[this.authorPinnedComment]));f.forEach(function(e){var f=e.id,g=d.getReplyCommentList(f),c=d.getNewReplyRange(a,e,g.getCommentCount());g=b("UFIFetcher").fetchCommentsOrThrow(g,c,d.$37(f,!1));h.push.apply(h,b("UFICommentFilters").getAuthors(g));d.$40(c,e,g)});e&&h.push.apply(h,b("UFIFeedbackFilters").getRequestedIDs(e));g=b("UFILivePinnedCommentStore").getPinnedCommentAuthorID(this.$2.ftentidentifier);g&&h.push(g);if(e&&e.acceptedanswer){c=b("UFIComments").getComment(e.acceptedanswer);c&&c.author&&h.push(c.author)}Object.assign(this.authorProfiles,b("ShortProfiles").getMultiNow(h))};a.$35=function(a,c,d,e,f){__p&&__p();var g=this,h=b("UFIFeedbackTargets").getFeedbackTargetIfExists(this.$2.ftentidentifier);if(!h){b("FBLogger")("ufi").warn("Feedback target %s not present while rendering UFI with source %s",this.$2.ftentidentifier,a);return}this.$9.feedback=h;j(a)&&this.render();this.canRenderHeader()&&this.renderHeader(h);this.$9.isHidden||(a===b("FeedbackPayloadSourceType").INITIAL_SERVER?(this.$38(a,d),this.$3.dispatch(b("UFIStoryAction").commentsArrived(this.$2,this.getRange(d).getOffset(),this.comments[d].length,a,d,f,this.$41()))):b("promiseDone")(this.fetchAllComments(a,c,d,e,f),function(){return g.$3.dispatch(b("UFIStoryAction").commentsArrived(g.$2,g.getRange(d).getOffset(),g.comments[d].length,a,d,f))}))};a.fetchAllComments=function(a,c,d,e,f){__p&&__p();var g=this;return b("Promise").resolve().then(function(){return g.fetchCommentsForFeedbackTarget(a,c,d,e,f).then(function(e){d===b("CommentSection").DEFAULT&&g.authorPinnedComment&&(e=[].concat(e,[g.authorPinnedComment]));var f=b("UFICommentFilters").getAuthors(e);return!g.$9.feedback||!g.$9.feedback.isthreaded||!e.length?f:g.fetchAllReplyIDsForComments(e,a,c).then(function(a){return f.concat(a)})}).then(function(a){return!g.$9.feedback?[]:b("UFIFeedbackFilters").getRequestedIDs(g.$9.feedback).concat(a)})}).then(function(a){var c=g.$9.feedback,d=b("UFILivePinnedCommentStore").getPinnedCommentAuthorID(g.$2.ftentidentifier);d&&a.push(d);if(c&&c.acceptedanswer){d=b("UFIComments").getComment(c.acceptedanswer);d&&d.author&&a.push(d.author)}return b("UFIFetcher").fetchShortProfiles(a)}).then(function(a){return Object.assign(g.authorProfiles,a)})};a.fetchCommentsForFeedbackTarget=function(a,c,d,e,f){var g=this,h=this.getToplevelCommentList(d).getCommentCount(),i=this.getNewRange(a,this.$2,h,d);return b("UFIFetcher").fetchComments(this.getToplevelCommentList(d),i,this.$36(c,d,e,f)).then(function(a){g.$39(i,a,d);return a})};a.$39=function(a,c,d){__p&&__p();var e=this,f=this.getToplevelCommentList(d),g=this.$2.ftentidentifier,h=b("gkx")("678267")||b("gkx")("678268"),i=this.$9,j=i.deletedCounts,k=i.canAddCommentMap,l=i.canReplyMap,m=i.commentPermalinks;this.replaceRange(a,d);this.comments[d]=c;d===b("CommentSection").DEFAULT?this.commentCounts[g]=f.getCommentCount():this.privateCommentsCount=f.getCommentCount();c.forEach(function(a){var c=a.id,g=a.cancomment,i=a.fbid,j=a.voteEnabled,k=a.voteCount;a=a.voteState;l[c]=g;m[c]=f.getPermalinkForComment(c);e.commentsToSection[c]=d;h&&j&&i&&e.$3.dispatch(b("UFICommentAction").updateVoteCountAndState(e.$2,i,k?k:0,a?a:b("UFIConstants").UFICommentVoteType.NONE))});j[d]||(j[d]={});j[d][g]=f.getDeletedCount();k[g]=!this.$9.featuredCommentLists[g]};a.fetchRepliesForComment=function(a,c,d){var e=this,f=a.id,g=this.getReplyCommentList(f).getCommentCount(),h=this.getNewReplyRange(c,a,g);return b("UFIFetcher").fetchComments(this.getReplyCommentList(f),h,this.$37(f,d)).then(function(b){e.$40(h,a,b);return b})};a.$40=function(a,c,d){__p&&__p();var e=c.id,f=this.getReplyCommentList(e),g=this.$9,h=g.deletedCounts,i=g.canAddCommentMap,j=g.featuredCommentLists,k=g.defaultRepliesExpandedMap,l=g.feedback,m=g.canReplyMap,n=g.commentPermalinks;this.replaceReplyRange(e,a);this.repliesMap[e]=d;this.commentCounts[e]=f.getCommentCount();h[b("CommentSection").DEFAULT][e]=f.getDeletedCount();i[e]=!j[e];k[e]=this.$34(l,c,d.length);d.forEach(function(a){var b=a.id;a=a.cancomment;m[b]=a;n[b]=f.getPermalinkForComment(b)})};a.$41=function(){var a;return this.$2.islivestreaming&&((a=this.$2)!=null?(a=a.liveVideoThreadedCommentsConfig)!=null?a.enable_replies:a:a)?(a=this.$9)!=null?(a=a.feedback)!=null?a.permalinkcommentid:a:a:null};a.fetchAllReplyIDsForComments=function(a,c,d){var e=this;a=new(b("Promise").all)(a.map(function(a){return e.fetchRepliesForComment(a,c,d).then(function(a){return b("UFICommentFilters").getAuthors(a)})}));return a.then(b("flattenArray"))};a.getToplevelCommentList=function(a){var c=this.$2;if(this.$9.featuredCommentLists[c.ftentidentifier])return this.$9.featuredCommentLists[c.ftentidentifier];if(b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid))return b("UFIToplevelStreamedCommentList").getCommentList(c.ftentidentifier,c.islivestreaming?b("UFIToplevelStreamedCommentList").GLOBAL_ID:c.instanceid);var d=this.getOrderingMode(a);return b("UFIToplevelPagedCommentList").getCommentList(c.ftentidentifier,d,a)};a.getReplyCommentList=function(a){if(a in this.$9.featuredCommentLists)return this.$9.featuredCommentLists[a];var c=this.commentsToSection[a]||b("CommentSection").DEFAULT;c=this.getOrderingMode(c);return b("UFIReplyCommentList").getCommentList(this.$2.ftentidentifier,a,c)};a.getRange=function(a){var c=this.getOrderingMode(a);this.ranges[a]=this.ranges[a]||{};if(!(c in this.ranges[a])){var d=this.getToplevelCommentList(a).getCommentCount(),e=Math.min(d,this.$2.defaultNumCommentsToExpand);this.ranges[a][c]=new(b("UFIRange"))(d-e,e)}return this.ranges[a][c]};a.replaceRange=function(a,b){var c=this.getOrderingMode(b);this.ranges[b]=this.ranges[b]||{};this.ranges[b][c]=a};a.getReplyRange=function(a){a in this.replyRanges||(this.replyRanges[a]=new(b("UFIRange"))());return this.replyRanges[a]};a.replaceReplyRange=function(a,b){this.replyRanges[a]=b};a.$16=function(){this.$5=!0,this.$24(),this.$42()};a.$42=function(){this.$43(),this.$44(),this.$22(),this.$45(),this.$46(),this.$47(),this.$48(),this.onUnloadSubscription&&this.onUnloadSubscription.remove(),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").remove(this.$2))};a.$20=function(){this.$22()};a.$48=function(){var a=this.$2;b("UFIPlayLiveVODHighlightsAdapter").stop(a.instanceid)};a.$47=function(){var a=this.$2;b("UFICommercialBreakAdapter").stop(a.instanceid)};a.$46=function(){var a=this.$2;b("UFIVODStreamingComments").stop(a.ftentidentifier,a.instanceid)};a.$43=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(a){return a&&b("UFICentralUpdates").unsubscribe(a)})};a.$44=function(){this.$1&&this.$1.release()};a.$22=function(){this.$6&&this.$6.release()};a.$45=function(){this.$11&&(this.$11.release(),this.$11=null),this.$8.forEach(function(a){return b("UFISharedDispatcher").unregister(a)})};a.$32=function(){var a=this.$2;return b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$10},b("React").createElement(b("StaticUFI.react"),{feedback:this.$9.feedback,id:this.$2.ftentidentifier,contextArgs:a,commentCounts:this.commentCounts,loadingComments:!0}))};a.shouldShowCommentOrderingModeSelector=function(a){var c=this.getToplevelCommentList(b("CommentSection").DEFAULT).getCommentCount()||a.commentcount||0;return a.orderingmodes&&c>=b("UFIConstants").minCommentsForOrderingModeSelector&&!this.$9.featuredCommentLists[this.$2.ftentidentifier]};return c}();e.exports=a}),null);
__d("UFIMentionsInputProxy.react",["cx","Promise","JSResource","JSResourceReference","React","UFICommonInteractionEvents","UFICommonInteractionLogger","promiseDone","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").createClass({displayName:"UFIMentionsInputProxy",_cmdBuffer:[],_interactionTrackingID:null,getInitialState:function(){return{component:null,viewComponent:null}},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[],this.props.initialData&&this._bootload()},componentDidUpdate:function(a,c){this._interactionTrackingID&&this.state.component&&!c.component&&(b("UFICommonInteractionLogger").endInteraction(this._interactionTrackingID),this._interactionTrackingID=null),this.state.component&&this._drainFnBuffer()},hasEnteredText:function(){return this._fillCmdBuffer({fn:"hasEnteredText",args:[]})},getText:function(){return this._fillCmdBuffer({fn:"getText",args:[]})},focus:function(){this._bootload(),this._fillCmdBuffer({fn:"focus",args:[]}),this.state.component||(this._interactionTrackingID=b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_COMPOSER_INPUT_FOCUS))},onDummyFocus:function(){this.props.onDummyFocus&&this.props.onDummyFocus(),this.focus()},submitComment:function(a,b){this._fillCmdBuffer({fn:"submitComment",args:[a,b]})},insertMention:function(a){this._fillCmdBuffer({fn:"insertMention",args:[a]})},insertEmoticon:function(a){this._fillCmdBuffer({fn:"insertEmoticon",args:[a]})},insertEmoji:function(a){this._fillCmdBuffer({fn:"insertEmoji",args:[a]})},replaceText:function(a,b){this._fillCmdBuffer({fn:"replaceText",args:[a,b]})},_bootload:function(){var a=this;b("promiseDone")(b("Promise").all([b("JSResource")("UFIMentionsInput.react").__setRef("UFIMentionsInputProxy.react").load(),new(b("Promise"))(function(c){a.props.viewComponent instanceof b("JSResourceReference")?a.props.viewComponent.load().done(c):c(a.props.viewComponent)})]),function(b){var c=b[0];b=b[1];a.isMounted()&&a.setState({component:c,viewComponent:b})})},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0},_fillCmdBuffer:function(a){if(this.refs.mentionsinputchild)return this._execCmd(a);else this._cmdBuffer=this._cmdBuffer.concat([a])},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var a=this._cmdBuffer[0];this._execCmd(a);this._cmdBuffer=this._cmdBuffer.slice(1);b("setImmediate")(this._drainFnBuffer)}},_execCmd:function(a){var b=this.refs.mentionsinputchild;return b[a.fn].apply(b,a.args)},_renderProxyInput:function(){var a="_1osa mentionsHidden";return b("React").createElement("input",{className:a,name:"add_comment_text",ref:"proxyInput",onFocus:this.focus})},_renderDummy:function(){var a="UFIAddCommentInput _1osb _1osc _2xww";return b("React").createElement("div",{onClick:this.onDummyFocus,className:"_2xwx",onFocus:this.onDummyFocus,onMouseOver:this._bootload,role:"presentation"},b("React").createElement("div",{className:a},this._renderProxyInput(),this.props.placeholder))},render:function(){var a=this.state.component;return!a?this._renderDummy():b("React").createElement(a,babelHelpers["extends"]({key:"mentionsinputchild",ref:"mentionsinputchild"},this.props,{viewComponent:this.state.viewComponent}),this.props.children)}});e.exports=a}),null);
__d("UFIShareNowMenuBootloader.react",["BootloadedComponent.react","JSResource","React","UFIShareLink.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="ufi_share_link_placeholder",h="ufi_share_link_loaded";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={openOnInit:!1,focusOnInit:!1,interacted:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=this.state,d=c.openOnInit,e=c.focusOnInit;c=c.interacted;var f=this.props,i=f.endpoint,j=f.endpointData,k=f.onShow,l=f.onHide,m=f.openOnInitOverride;f=f.onMouseUp;var n=b("React").createElement(b("UFIShareLink.react"),{href:"#","data-testid":g,onMouseUp:f,onClick:function(){return a.setState({interacted:!0,openOnInit:!0})},onFocus:function(){return a.setState({interacted:!0,focusOnInit:!0})},onMouseOver:function(){return a.setState({openOnInit:!1,focusOnInit:!1,interacted:!0})}});return c||m?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIShareNowMenu.react").__setRef("UFIShareNowMenuBootloader.react"),bootloadPlaceholder:n,endpoint:i,endpointData:j,onShow:k,onHide:l,openOnInit:d||m,focusOnInit:e},b("React").createElement(b("UFIShareLink.react"),{onMouseUp:f,href:"#","data-testid":h})):n};return c}(b("React").Component);e.exports=a}),null);
__d("MultiBootstrapDataSource",["DataSource"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c._bootstrapEndpoints=b.bootstrapEndpoints;return c}var c=b.prototype;c.bootstrapWithoutToken=function(){for(var a=0;a<this._bootstrapEndpoints.length;a++)this.fetch(this._bootstrapEndpoints[a].endpoint,this._bootstrapEndpoints[a].data||{},{bootstrap:!0})};return b}(b("DataSource"));e.exports=a}),null);